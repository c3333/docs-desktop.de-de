---
title: Übersicht über Typkonverter für XAML
ms.date: 03/30/2017
helpviewer_keywords:
- XAML [XAML Services], type converters
- XAML [XAML Services], TypeConverter
- type conversion for XAML [XAML Services]
ms.assetid: 51a65860-efcb-4fe0-95a0-1c679cde66b7
ms.openlocfilehash: 5ed7f96c6765f5cec0d63ace2cb15fd3f38b72a8
ms.sourcegitcommit: 9f6df084c53a3da0ea657ed0d708a72213683084
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/09/2020
ms.locfileid: "96977257"
---
# <a name="overview-of-type-converters-for-xaml"></a><span data-ttu-id="9b3f1-102">Übersicht über Typkonverter für XAML</span><span class="sxs-lookup"><span data-stu-id="9b3f1-102">Overview of type converters for XAML</span></span>

<span data-ttu-id="9b3f1-103">Typkonverter stellen die Logik für einen Objekt-Writer bereit, der die Konvertierung von einer Zeichenfolge im XAML-Markup in bestimmte Objekte in einem Objektdiagramm vornimmt.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-103">Type converters supply logic for an object writer that converts from a string in XAML markup into particular objects in an object graph.</span></span> <span data-ttu-id="9b3f1-104">In .net XAML Services muss der Typkonverter eine Klasse sein, die von abgeleitet wird <xref:System.ComponentModel.TypeConverter> .</span><span class="sxs-lookup"><span data-stu-id="9b3f1-104">In .NET XAML Services, the type converter must be a class that derives from <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="9b3f1-105">Einige Konverter unterstützen zudem den XAML-Speicherpfad und können zum Serialisieren eines Objekts in ein Zeichenfolgenformular im Serialisierungsmarkup verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-105">Some converters also support the XAML save path and can be used to serialize an object into a string form in serialization markup.</span></span> <span data-ttu-id="9b3f1-106">In diesem Thema wird beschrieben, wie und wann Typkonverter in XAML aufgerufen werden. Zudem enthält es Implementierungsratschläge für die Methodenüberschreibungen von <xref:System.ComponentModel.TypeConverter>.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-106">This topic describes how and when type converters in XAML are invoked, and provides implementation advice for the method overrides of <xref:System.ComponentModel.TypeConverter>.</span></span>

## <a name="type-conversion-concepts"></a><span data-ttu-id="9b3f1-107">Typkonvertierungskonzepte</span><span class="sxs-lookup"><span data-stu-id="9b3f1-107">Type Conversion Concepts</span></span>

<span data-ttu-id="9b3f1-108">In den folgenden Abschnitten werden die grundlegenden Konzepte erläutert, wie XAML Zeichen folgen verwendet und wie Objekt-Writer in .net XAML-Diensten Typkonverter verwenden, um einige der Zeichen folgen Werte zu verarbeiten, die in einer XAML-Quelle auftreten.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-108">The following sections explain basic concepts about how XAML uses strings, and how object writers in .NET XAML Services use type converters to process some of the string values that are encountered in a XAML source.</span></span>

### <a name="xaml-and-string-values"></a><span data-ttu-id="9b3f1-109">XAML- und Zeichenfolgenwerte</span><span class="sxs-lookup"><span data-stu-id="9b3f1-109">XAML and String Values</span></span>

<span data-ttu-id="9b3f1-110">Wenn Sie eine Attributwert in einer XAML-Datei festlegen, handelt es sich beim anfänglichen Typ dieses Werts um eine Zeichenfolge in einem allgemeinen Sinn und um einen Zeichenfolgenattributwert in einem XML-Sinn.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-110">When you set an attribute value in a XAML file, the initial type of that value is a string in a general sense, and a string attribute value in an XML sense.</span></span> <span data-ttu-id="9b3f1-111">Auch andere Primitive wie <xref:System.Double> sind anfängliche Zeichenfolgen für einen XAML-Prozessor.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-111">Even other primitives such as <xref:System.Double> are initially strings to a XAML processor.</span></span>

<span data-ttu-id="9b3f1-112">In den meisten Fällen benötigt ein XAML-Prozessor zwei Angaben, um einen Attributwert zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-112">In most cases, a XAML processor needs two pieces of information to process an attribute value.</span></span> <span data-ttu-id="9b3f1-113">Die erste Angabe ist der Werttyp der Eigenschaft, die festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-113">The first piece of information is the value type of the property that is being set.</span></span> <span data-ttu-id="9b3f1-114">Jede Zeichenfolge, die einen Attributwert definiert, und in XAML verarbeitet wird, muss schließlich umgewandelt werden oder zu einem Wert dieses Typs aufgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-114">Any string that defines an attribute value and that is processed in XAML must ultimately be converted or resolved to a value of that type.</span></span> <span data-ttu-id="9b3f1-115">Wenn es sich beim Wert um einen Primitiv handelt, den der XAML-Parser versteht (beispielsweise ein numerischer Wert), wird versucht, eine direkte Konvertierung der Zeichenfolge vorzunehmen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-115">If the value is a primitive that is understood by the XAML parser (such as a numeric value), a direct conversion of the string is attempted.</span></span> <span data-ttu-id="9b3f1-116">Wenn der Wert für das Attribut eine Aufzählung referenziert, wird der Name der angegebenen Zeichenfolge mit einer benannten Konstante in dieser Aufzählung abgeglichen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-116">If the value for the attribute references an enumeration, the supplied string is checked for a name match to a named constant in that enumeration.</span></span> <span data-ttu-id="9b3f1-117">Wenn der Wert kein Parser-verständlicher primitiver oder ein konstanter Name aus einer Enumeration ist, muss der entsprechende Typ einen Wert oder Verweis bereitstellen können, der auf einer konvertierten Zeichenfolge basiert.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-117">If the value is not a parser-understood primitive or a constant name from an enumeration, the applicable type must be able to provide a value or reference that is based on a converted string.</span></span>

> [!NOTE]
> <span data-ttu-id="9b3f1-118">XAML-Sprachdirektiven verwenden keine Typkonverter.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-118">XAML language directives do not use type converters.</span></span>

### <a name="type-converters-and-markup-extensions"></a><span data-ttu-id="9b3f1-119">Typkonverter und Markuperweiterungen</span><span class="sxs-lookup"><span data-stu-id="9b3f1-119">Type Converters and Markup Extensions</span></span>

<span data-ttu-id="9b3f1-120">Markuperweiterungen müssen durch einen XAML-Prozessor verarbeitet werden, bevor die Überprüfung auf Eigenschaftstyp und andere Überlegungen erfolgt.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-120">Markup extension usages must be handled by a XAML processor before it checks for property type and other considerations.</span></span> <span data-ttu-id="9b3f1-121">Wenn beispielsweise eine als Attribut festzulegende Eigenschaft normalerweise eine Typkonvertierung aufweist, in einem bestimmten Fall jedoch durch eine Markuperweiterungsverwendung festgelegt wird, dann wird das Markuperweiterungsverhalten zuerst festgelegt.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-121">For example, if a property being set as an attribute normally has a type conversion, but in a particular case is set by a markup extension usage, then the markup extension behavior processes first.</span></span> <span data-ttu-id="9b3f1-122">Eine allgemeine Situation, in der eine Markuperweiterung erforderlich ist, besteht im Erstellen eines Verweises auf ein vorhandenes Objekt.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-122">One common situation where a markup extension is necessary is to make a reference to an object that already exists.</span></span> <span data-ttu-id="9b3f1-123">In diesem Szenario kann ein zustandsloser Typkonverter nur eine neue Instanz genieren, die möglicherweise nicht gewünscht ist.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-123">For this scenario, a stateless type converter can only generate a new instance, which might not be desirable.</span></span> <span data-ttu-id="9b3f1-124">Weitere Informationen zur Markuperweiterungen finden Sie unter [Markup Extensions for XAML Overview](markup-extensions-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9b3f1-124">For more information about markup extensions, see [Markup Extensions for XAML Overview](markup-extensions-overview.md).</span></span>

### <a name="native-type-converters"></a><span data-ttu-id="9b3f1-125">Systemeigene Typkonverter</span><span class="sxs-lookup"><span data-stu-id="9b3f1-125">Native Type Converters</span></span>

<span data-ttu-id="9b3f1-126">In den Windows Presentation Foundation (WPF)-und .net XAML-Dienst Implementierungen gibt es bestimmte CLR-Typen, die eine systemeigene Typkonvertierungs Verarbeitung aufweisen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-126">In the Windows Presentation Foundation (WPF) and .NET XAML services implementations, there are certain CLR types that have native type conversion handling.</span></span> <span data-ttu-id="9b3f1-127">Diese CLR-Typen werden jedoch nicht als primitive angesehen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-127">However, those CLR types are not conventionally thought of as primitives.</span></span> <span data-ttu-id="9b3f1-128">Ein Beispiel eines solchen Typs ist <xref:System.DateTime>.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-128">An example of such a type is <xref:System.DateTime>.</span></span> <span data-ttu-id="9b3f1-129">Ein Grund dafür besteht in der Funktionsweise der .NET Framework-Architektur: Der Typ <xref:System.DateTime> ist in „mscorlib“ definiert. Hierbei handelt es sich um die grundlegendste Bibliothek in .NET.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-129">One reason for this is how the .NET Framework architecture works: the type <xref:System.DateTime> is defined in mscorlib, the most basic library in .NET.</span></span> <span data-ttu-id="9b3f1-130"><xref:System.DateTime> darf nicht mit einem Attribut attributiert werden, das aus einer anderen Assembly stammt, die eine Abhängigkeit einführt ( <xref:System.ComponentModel.TypeConverterAttribute> ist vom System).</span><span class="sxs-lookup"><span data-stu-id="9b3f1-130"><xref:System.DateTime> is not permitted to be attributed with an attribute that comes from another assembly that introduces a dependency (<xref:System.ComponentModel.TypeConverterAttribute> is from System).</span></span> <span data-ttu-id="9b3f1-131">Daher kann der übliche typkonverterermittlungs Mechanismus durch die Attributierung nicht unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-131">Therefore, the usual type converter discovery mechanism by attributing cannot be supported.</span></span> <span data-ttu-id="9b3f1-132">Stattdessen verfügt der XAML-Parser über eine Liste von Typen, für die die systemeigene Verarbeitung erforderlich ist, und diese Typen werden ähnlich wie echte Primitive verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-132">Instead, the XAML parser has a list of types that need native processing, and it processes these types similar to how the true primitives are processed.</span></span> <span data-ttu-id="9b3f1-133">Im Fall von <xref:System.DateTime>umfasst diese Verarbeitung einen Aufruf von <xref:System.DateTime.Parse%2A>.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-133">In the case of <xref:System.DateTime>, this processing involves a call to <xref:System.DateTime.Parse%2A>.</span></span>

## <a name="implementing-a-type-converter"></a><span data-ttu-id="9b3f1-134">Implementieren eines Typkonverters</span><span class="sxs-lookup"><span data-stu-id="9b3f1-134">Implementing a Type Converter</span></span>

<span data-ttu-id="9b3f1-135">In den folgenden Abschnitten wird die API der <xref:System.ComponentModel.TypeConverter> -Klasse erläutert.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-135">The following sections discuss the API of the <xref:System.ComponentModel.TypeConverter> class.</span></span>

### <a name="typeconverter"></a><span data-ttu-id="9b3f1-136">TypeConverter</span><span class="sxs-lookup"><span data-stu-id="9b3f1-136">TypeConverter</span></span>

<span data-ttu-id="9b3f1-137">Unter .net XAML Services sind alle Typkonverter, die für XAML-Zwecke verwendet werden, Klassen, die von der-Basisklasse abgeleitet werden <xref:System.ComponentModel.TypeConverter> .</span><span class="sxs-lookup"><span data-stu-id="9b3f1-137">Under .NET XAML Services, all type converters that are used for XAML purposes are classes that derive from the base class <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="9b3f1-138">Die Klasse <xref:System.ComponentModel.TypeConverter> war in Versionen von .NET Framework vorhanden, als es XAML noch nicht gab. Eins der ursprünglichen <xref:System.ComponentModel.TypeConverter> -Szenarien bestand darin, die Zeichenfolgenkonvertierung für Eigenschafts-Editoren in visuellen Designern bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-138">The <xref:System.ComponentModel.TypeConverter> class existed in versions of the .NET Framework before XAML existed; one of the original <xref:System.ComponentModel.TypeConverter> scenarios was to provide string conversion for property editors in visual designers.</span></span>

<span data-ttu-id="9b3f1-139">Für XAML wird die Rolle von <xref:System.ComponentModel.TypeConverter> erweitert.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-139">For XAML, the role of <xref:System.ComponentModel.TypeConverter> is expanded.</span></span> <span data-ttu-id="9b3f1-140">Für XAML-Zwecke ist <xref:System.ComponentModel.TypeConverter> die Basisklasse für das Bereitstellen von Unterstützung für bestimmte To- und From-Zeichenfolgekonvertierungen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-140">For XAML purposes, <xref:System.ComponentModel.TypeConverter> is the base class for providing support for certain to-string and from-string conversions.</span></span> <span data-ttu-id="9b3f1-141">Die From-Zeichenfolge ermöglicht das Analysieren eines Zeichenfolgenattributwerts aus XAML.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-141">From-string enables parsing a string attribute value from XAML.</span></span> <span data-ttu-id="9b3f1-142">Die To-Zeichenfolge ermöglicht das erneute Verarbeiten eines Laufzeitwerts einer bestimmten Objekteigenschaft zurück in ein Attribut in XAML für die Serialisierung.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-142">To-string might enable processing a run-time value of a particular object property back into an attribute in XAML for serialization.</span></span>

<span data-ttu-id="9b3f1-143"><xref:System.ComponentModel.TypeConverter> definiert vier Member, die für die Konvertierungen von to- und from-Zeichenfolgen für XAML-Verarbeitungszwecke relevant sind:</span><span class="sxs-lookup"><span data-stu-id="9b3f1-143"><xref:System.ComponentModel.TypeConverter> defines four members that are relevant for converting to-string and from-string for XAML processing purposes:</span></span>

- <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>

- <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A>

- <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>

- <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>

<span data-ttu-id="9b3f1-144">Unter diesen Member lautet die wichtigste Methode <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>. Diese wandelt die Eingabezeichenfolge in den erforderlichen Objekttyp um.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-144">Of these members, the most important method is <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>, which converts the input string to the required object type.</span></span> <span data-ttu-id="9b3f1-145">Die <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> -Methode kann implementiert werden, um einen größeren Typbereich in den gewünschten Zieltyp des Konverters zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-145">The <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> method can be implemented to convert a wider range of types into the intended destination type of the converter.</span></span> <span data-ttu-id="9b3f1-146">Daher kann sie Zwecke erfüllen, die über XAML hinausgehen wie das Unterstützen von Laufzeitkonvertierungen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-146">Therefore, it can serve purposes that extend beyond XAML, such as supporting run-time conversions.</span></span> <span data-ttu-id="9b3f1-147">Für die XAML-Verwendung ist jedoch nur der Codepfad wichtig, der eine <xref:System.String> -Eingabe verarbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-147">However, for XAML use, only the code path that can process a <xref:System.String> input is important.</span></span>

<span data-ttu-id="9b3f1-148">Die zweitwichtigste Methode ist <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> .</span><span class="sxs-lookup"><span data-stu-id="9b3f1-148">The second-most important method is <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span></span> <span data-ttu-id="9b3f1-149">Wenn eine Anwendung in eine Markup Darstellung konvertiert wird (z. b. Wenn Sie in XAML als Datei gespeichert wird), <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> ist im größeren Szenario eines XAML-Textwriters beteiligt, um eine Markup Darstellung zu schaffen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-149">If an application is converted to a markup representation (for example, if it is saved to XAML as a file), <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> is involved in the larger scenario of a XAML text writer to produce a markup representation.</span></span> <span data-ttu-id="9b3f1-150">In diesem Fall besteht der wichtige Codepfad für XAML darin, wenn der Aufrufer einen `destinationType` von <xref:System.String>weitergibt.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-150">In this case, the important code path for XAML is when the caller passes a `destinationType` of <xref:System.String>.</span></span>

<span data-ttu-id="9b3f1-151"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> und <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> sind Unterstützungsmethoden, die verwendet werden, wenn ein Dienst die Funktionen der <xref:System.ComponentModel.TypeConverter> -Implementierung abfragt.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-151"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> and <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> are support methods that are used when a service queries the capabilities of the <xref:System.ComponentModel.TypeConverter> implementation.</span></span> <span data-ttu-id="9b3f1-152">Sie müssen diese Methoden implementieren, um `true` für typspezifische Klassen zurückzugeben, welche die entsprechenden Konvertierungsmethoden Ihres Konverters unterstützen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-152">You must implement these methods to return `true` for type-specific cases that the equivalent conversion methods of your converter support.</span></span> <span data-ttu-id="9b3f1-153">Für XAML-Zwecke bedeutet dies in der Regel den <xref:System.String> -Typ.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-153">For XAML purposes, this generally means the <xref:System.String> type.</span></span>

### <a name="culture-information-and-type-converters-for-xaml"></a><span data-ttu-id="9b3f1-154">Kulturinformations- und Typkonverter für XAML</span><span class="sxs-lookup"><span data-stu-id="9b3f1-154">Culture Information and Type Converters for XAML</span></span>

<span data-ttu-id="9b3f1-155">Jede <xref:System.ComponentModel.TypeConverter> -Implementierung kann eindeutig interpretieren, was eine gültige Zeichenfolge für eine Konvertierung ist, und sie kann zudem die Typbeschreibung, die als Parameter weitergegeben wird, verwenden oder ignorieren.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-155">Each <xref:System.ComponentModel.TypeConverter> implementation can uniquely interpret what is a valid string for a conversion, and it can also use or ignore the type description that is passed as parameters.</span></span> <span data-ttu-id="9b3f1-156">Eine wichtige Überlegung in Bezug auf die Kultur- und XAML-Typkonvertierung lautet wie folgt: Auch wenn die Verwendung von lokalisierbaren Zeichenfolgen als Attributwerten durch XAML unterstützt wird, können Sie diese lokalisierbaren Zeichenfolgen nicht als Typkonvertereingabe mit bestimmten Kulturanforderungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-156">An important consideration for culture and XAML type conversion is the following: although using localizable strings as attribute values is supported by XAML, you cannot use these localizable strings as type converter input with specific culture requirements.</span></span> <span data-ttu-id="9b3f1-157">Diese Einschränkung besteht, da Typkonverter für XAML-Attributwerte ein zwangsläufig festes XAML-Sprachverarbeitungsverhalten umfassen, in dem die `en-US` -Kultur verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-157">This limitation is because type converters for XAML attribute values involve a necessarily fixed-language XAML-processing behavior that uses `en-US` culture.</span></span> <span data-ttu-id="9b3f1-158">Weitere Informationen zu den Entwurfs Gründen für diese Einschränkung finden Sie in der Übersicht über die XAML-Sprachspezifikation ([ \[ MS \] -XAML](/previous-versions/msp-n-p/ff650760(v=pandp.10))) oder [WPF-Globalisierung und-Lokalisierung](../framework/wpf/advanced/wpf-globalization-and-localization-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9b3f1-158">For more information about the design reasons for this restriction, see the XAML language specification ([\[MS-XAML\]](/previous-versions/msp-n-p/ff650760(v=pandp.10))) or [WPF Globalization and Localization Overview](../framework/wpf/advanced/wpf-globalization-and-localization-overview.md).</span></span>

<span data-ttu-id="9b3f1-159">Beispielsweise können Kulturunterschiede in Kulturen ein Problem werden, in welchen anstelle eines Punkts als dezimales Trennzeichen ein Komma für die Zahlen im Zeichenfolgenformat verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-159">As an example where culture can be an issue, some cultures use a comma instead of a period as the decimal point delimiter for numbers in string form.</span></span> <span data-ttu-id="9b3f1-160">Diese Verwendung führt zu einem Konflikt mit dem Verhalten, das viele vorhandenen Typkonverter aufweisen, was in der Verwendung eines Kommas als Trennzeichen besteht.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-160">This use collides with the behavior that many existing type converters have, which is to use a comma as a delimiter.</span></span> <span data-ttu-id="9b3f1-161">Das Weitergeben einer Kultur über `xml:lang` in der umgebenden XAML löst das Problem nicht.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-161">Passing a culture through `xml:lang` in the surrounding XAML does not solve the issue.</span></span>

### <a name="implementing-convertfrom"></a><span data-ttu-id="9b3f1-162">Implementieren von ConvertFrom</span><span class="sxs-lookup"><span data-stu-id="9b3f1-162">Implementing ConvertFrom</span></span>

<span data-ttu-id="9b3f1-163">Damit die <xref:System.ComponentModel.TypeConverter> -Methode für diesen Konverter als eine <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> -Implementierung verwendet werden kann, die XAML unterstützt, muss sie eine Zeichenfolge als den `value` -Parameter akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-163">To be usable as a <xref:System.ComponentModel.TypeConverter> implementation that supports XAML, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> method for that converter must accept a string as the `value` parameter.</span></span> <span data-ttu-id="9b3f1-164">Wenn die Zeichenfolge ein gültiges Format aufweist und durch die <xref:System.ComponentModel.TypeConverter> -Implementierung konvertiert werden kann, muss das zurückgegebene Objekt eine Umwandlung zum Typ unterstützen, der durch die Eigenschaft erwartet wird.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-164">If the string is in a valid format and can be converted by the <xref:System.ComponentModel.TypeConverter> implementation, the returned object must support a cast to the type that is expected by the property.</span></span> <span data-ttu-id="9b3f1-165">Andernfalls muss die <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> -Implementierung `null`zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-165">Otherwise, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementation must return `null`.</span></span>

<span data-ttu-id="9b3f1-166">Jede <xref:System.ComponentModel.TypeConverter> -Implementierung kann eindeutig interpretieren, was eine gültige Zeichenfolge für eine Konvertierung ausmacht, und sie kann zudem die Typbeschreibung oder Kulturkontexte verwenden oder ignorieren, die als Parameter weitergegeben werden.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-166">Each <xref:System.ComponentModel.TypeConverter> implementation can uniquely interpret what constitutes a valid string for a conversion, and it can also use or ignore the type description or culture contexts that are passed as parameters.</span></span> <span data-ttu-id="9b3f1-167">Bei der WPF-XAML-Verarbeitung werden jedoch möglicherweise nicht in allen Fällen Werte an den Typbeschreibungskontext weitergegeben, und wird möglicherweise zudem nicht die Kultur auf Grundlage von `xml:lang`weitergegeben.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-167">However, the WPF XAML processing might not pass values to the type description context in all cases and also might not pass culture based on `xml:lang`.</span></span>

> [!NOTE]
> <span data-ttu-id="9b3f1-168">Verwenden Sie die geschweiften Klammern ( {} ), insbesondere die öffnende geschweifte Klammer ({), nicht als Element Ihres Zeichen folgen Formats.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-168">Do not use the braces ({}), specifically the opening brace ({), as an element of your string format.</span></span> <span data-ttu-id="9b3f1-169">Diese Zeichen sind als ein Eintrag reserviert und dienen dem Beenden einer Markuperweiterungssequenz.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-169">These characters are reserved as the entry and exit for a markup extension sequence.</span></span>

<span data-ttu-id="9b3f1-170">Es ist angemessen, eine Ausnahme auszulösen, wenn Ihr Typkonverter über Zugriff auf einen XAML-Dienst vom .net XAML-dienstobjektwriter verfügen muss, der <xref:System.IServiceProvider.GetService%2A> für den Kontext vorgenommene-Vorgang jedoch nicht diesen Dienst zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-170">It is appropriate to throw an exception when your type converter must have access to a XAML service from .NET XAML Services object writer, but the <xref:System.IServiceProvider.GetService%2A> call that is made against the context does not return that service.</span></span>

### <a name="implementing-convertto"></a><span data-ttu-id="9b3f1-171">Implementieren von ConvertTo</span><span class="sxs-lookup"><span data-stu-id="9b3f1-171">Implementing ConvertTo</span></span>

<span data-ttu-id="9b3f1-172"><xref:System.ComponentModel.TypeConverter.ConvertTo%2A> wird möglicherweise für die Serialisierungsunterstützung verwendet.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-172"><xref:System.ComponentModel.TypeConverter.ConvertTo%2A> is potentially used for serialization support.</span></span> <span data-ttu-id="9b3f1-173">Die Serialisierungsunterstützung durch <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> für Ihren benutzerdefinierten Typ und dessen Typkonverter ist nicht unbedingt erforderlich.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-173">Serialization support through <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> for your custom type and its type converter is not an absolute requirement.</span></span> <span data-ttu-id="9b3f1-174">Wenn Sie jedoch ein Steuerelement implementieren oder die Serialisierung als Bestandteil der Features oder zum Entwerfen Ihrer Klasse verwenden, sollten Sie <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>implementieren.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-174">However, if you are implementing a control, or using serialization of as part of the features or design of your class, you should implement <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span></span>

<span data-ttu-id="9b3f1-175">Damit die Verwendung als eine <xref:System.ComponentModel.TypeConverter> -Implementierung erfolgen kann, die XAML unterstützt, muss die <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> -Methode für diesen Konverter eine Instanz des Typs (oder eines Werts) akzeptieren, die als der `value` -Parameter unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-175">To be usable as a <xref:System.ComponentModel.TypeConverter> implementation that supports XAML, the <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> method for that converter must accept an instance of the type (or a value) that is supported as the `value` parameter.</span></span> <span data-ttu-id="9b3f1-176">Wenn der Parameter `destinationType` vom Typ <xref:System.String>ist, muss das zurückgegebene Objekt in der Lage sein, als <xref:System.String>umgewandelt zu werden.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-176">When the `destinationType` parameter is of type <xref:System.String>, the returned object must be able to be cast as <xref:System.String>.</span></span> <span data-ttu-id="9b3f1-177">Die zurückgegebene Zeichenfolge muss einen serialisierten Wert von `value`darstellen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-177">The returned string must represent a serialized value of `value`.</span></span> <span data-ttu-id="9b3f1-178">Im Idealfall sollte das von Ihnen ausgewählte Serialisierungsformat in der Lage sein, den gleichen Wert zu generieren, als wenn die Zeichenfolge an die <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> -Implementierung desselben Konverters weitergegeben werden würde, und zwar ohne erhebliche Informationsverluste.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-178">Ideally, the serialization format that you choose should be able to generate the same value as if that string were passed to the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementation of the same converter, without significant loss of information.</span></span>

<span data-ttu-id="9b3f1-179">Wenn der Wert weder serialisiert werden kann noch der Konverter die Serialisierung unterstützt, muss die <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> -Implementierung `null` zurückgeben und kann eine Ausnahme auslösen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-179">If the value cannot be serialized or the converter does not support serialization, the <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> implementation must return `null` and can throw an exception.</span></span> <span data-ttu-id="9b3f1-180">Wenn Sie jedoch Ausnahmen auslösen, sollten Sie die Unfähigkeit in Bezug auf die Verwendung dieser Konvertierung als Bestandteil Ihrer <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> -Implementierung melden, sodass die bewährte Vorgehensweise in Bezug auf die Überprüfung mit <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> zunächst darin besteht, dass die Vermeidung von Ausnahmen unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-180">However, if you do throw exceptions, you should report the inability to use that conversion as part of your <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementation so that the best practice of checking with <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> first to avoid exceptions is supported.</span></span>

<span data-ttu-id="9b3f1-181">Wenn der Parameter `destinationType` nicht vom Typ <xref:System.String>ist, können Sie Ihre eigene Konverterverarbeitung auswählen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-181">If the `destinationType` parameter is not of type <xref:System.String>, you can choose your own converter handling.</span></span> <span data-ttu-id="9b3f1-182">Für gewöhnlich nehmen Sie eine Zurücksetzung auf die grundlegende Implementierungsverarbeitung vor, wodurch in der Basis <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> eine bestimmte Ausnahme ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-182">Typically, you revert to base implementation handling, which in the base <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> raises a specific exception.</span></span>

<span data-ttu-id="9b3f1-183">Es ist angemessen, eine Ausnahme auszulösen, wenn Ihr Typkonverter über Zugriff auf einen XAML-Dienst vom .net XAML-dienstobjektwriter verfügen muss, der <xref:System.IServiceProvider.GetService%2A> für den Kontext vorgenommene-Vorgang jedoch nicht diesen Dienst zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-183">It is appropriate to throw an exception when your type converter must have access to a XAML service from .NET XAML Services object writer, but the <xref:System.IServiceProvider.GetService%2A> call that is made against the context does not return that service.</span></span>

### <a name="implementing-canconvertfrom"></a><span data-ttu-id="9b3f1-184">Implementieren von CanConvertFrom</span><span class="sxs-lookup"><span data-stu-id="9b3f1-184">Implementing CanConvertFrom</span></span>

<span data-ttu-id="9b3f1-185">Ihre Implementierung <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> sollte `true` für `sourceType` vom Typ <xref:System.String> zurückgeben und andernfalls die grundlegende Implementierung ableiten.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-185">Your <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> implementation should return `true` for `sourceType` of type <xref:System.String> and otherwise, defer to the base implementation.</span></span> <span data-ttu-id="9b3f1-186">Lösen Sie keine Ausnahmen aus <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> aus.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-186">Do not throw exceptions from <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A>.</span></span>

### <a name="implementing-canconvertto"></a><span data-ttu-id="9b3f1-187">Implementieren von CanConvertTo</span><span class="sxs-lookup"><span data-stu-id="9b3f1-187">Implementing CanConvertTo</span></span>

<span data-ttu-id="9b3f1-188">Ihre Implementierung <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> sollte `true` für `destinationType` vom Typ <xref:System.String>zurückgeben und andernfalls die grundlegende Implementierung ableiten.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-188">Your <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementation should return `true` for `destinationType` of type <xref:System.String>, and otherwise defer to the base implementation.</span></span> <span data-ttu-id="9b3f1-189">Lösen Sie keine Ausnahmen aus <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> aus.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-189">Do not throw exceptions from <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>.</span></span>

## <a name="applying-the-typeconverterattribute"></a><span data-ttu-id="9b3f1-190">Anwenden von TypeConverterAttribute</span><span class="sxs-lookup"><span data-stu-id="9b3f1-190">Applying the TypeConverterAttribute</span></span>

<span data-ttu-id="9b3f1-191">Damit Ihr benutzerdefinierter Typkonverter als der handelende Typkonverter für eine benutzerdefinierte Klasse durch .net XAML-Dienste verwendet werden kann, müssen Sie das <xref:System.ComponentModel.TypeConverterAttribute> auf Ihre Klassendefinition anwenden.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-191">For your custom type converter to be used as the acting type converter for a custom class by .NET XAML Services, you must apply the <xref:System.ComponentModel.TypeConverterAttribute> to your class definition.</span></span> <span data-ttu-id="9b3f1-192">Beim <xref:System.ComponentModel.TypeConverterAttribute.ConverterTypeName%2A> , den Sie über das Attribut angeben, muss es sich um den Typnamen Ihres benutzerdefinierten Typkonverters handeln.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-192">The <xref:System.ComponentModel.TypeConverterAttribute.ConverterTypeName%2A> that you specify through the attribute must be the type name of your custom type converter.</span></span> <span data-ttu-id="9b3f1-193">Beim Anwenden dieses Attributs, wenn ein XAML-Prozessor Werte verarbeitet, bei denen der Eigenschaftstyp Ihren benutzerdefinierten Klassentyp verwendet, kann es Zeichenfolgen eingeben und Objektinstanzen zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-193">If you apply this attribute, when a XAML processor handles values where the property type uses your custom class type, it can input strings and return object instances.</span></span>

<span data-ttu-id="9b3f1-194">Sie können auch einen Typkonverter auf Grundlage einzelner Eigenschaften bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-194">You can also provide a type converter on a per-property basis.</span></span> <span data-ttu-id="9b3f1-195">Anstatt ein <xref:System.ComponentModel.TypeConverterAttribute> auf die Klassendefinition anzuwenden, wenden Sie es auf eine Eigenschafts Definition an (die Haupt Definition, nicht die darin enthaltenen `get` / `set` Implementierungen).</span><span class="sxs-lookup"><span data-stu-id="9b3f1-195">Instead of applying a <xref:System.ComponentModel.TypeConverterAttribute> to the class definition, apply it to a property definition (the main definition, not the `get`/`set` implementations within it).</span></span> <span data-ttu-id="9b3f1-196">Der Eigenschaftstyp muss mit dem Typ übereinstimmen, der durch Ihren benutzerdefinierten Typkonverter verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-196">The type of the property must match the type that is processed by your custom type converter.</span></span> <span data-ttu-id="9b3f1-197">Wenn dieses Attribut angewendet ist, wenn ein XAML-Prozessor Werte dieser Eigenschaft verarbeitet, kann es Eingabezeichenfolgen verarbeiten und Objektinstanzen zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-197">With this attribute applied, when a XAML processor handles values of that property, it can process input strings and return object instances.</span></span> <span data-ttu-id="9b3f1-198">Die Typkonvertertechnik pro Eigenschaft ist nützlich, wenn Sie einen Eigenschaftentyp aus Microsoft .NET Framework oder einer anderen Bibliothek verwenden möchten, in der Sie die Klassendefinition nicht steuern können und keine dort anwenden können <xref:System.ComponentModel.TypeConverterAttribute> .</span><span class="sxs-lookup"><span data-stu-id="9b3f1-198">The per-property type converter technique is useful if you choose to use a property type from Microsoft .NET Framework or from some other library where you cannot control the class definition and cannot apply a <xref:System.ComponentModel.TypeConverterAttribute> there.</span></span>

<span data-ttu-id="9b3f1-199">Wenden Sie zum Bereitstellen eines Typkonvertierungsverhaltens für ein benutzerdefiniertes angefügtes Member <xref:System.ComponentModel.TypeConverterAttribute> auf die `Get` -Accessor-Methode des Implementierungsmusters für das angefügte Member an.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-199">To supply a type conversion behavior for a custom attached member, apply <xref:System.ComponentModel.TypeConverterAttribute> to the `Get` accessor method of the implementation pattern for the attached member.</span></span>

## <a name="accessing-service-provider-context-from-a-markup-extension-implementation"></a><span data-ttu-id="9b3f1-200">Zugriff auf den Dienstanbieterkontext über eine Markuperweiterungsimplementierung</span><span class="sxs-lookup"><span data-stu-id="9b3f1-200">Accessing Service Provider Context from a Markup Extension Implementation</span></span>

<span data-ttu-id="9b3f1-201">Die verfügbaren Dienste sind für jeden Wertkonverter gleich.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-201">The available services are the same for any value converter.</span></span> <span data-ttu-id="9b3f1-202">Der Unterschied besteht darin, wie jeder Wertkonverter den Dienstkontext empfängt.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-202">The difference is in how each value converter receives the service context.</span></span> <span data-ttu-id="9b3f1-203">Der Zugriff auf Dienste und die verfügbaren Dienste wird im Thema [Type Converters and Markup Extensions for XAML](type-converters-and-markup-extensions.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-203">Accessing services and the services available are documented in the topic [Type Converters and Markup Extensions for XAML](type-converters-and-markup-extensions.md).</span></span>

## <a name="type-converters-in-the-xaml-node-stream"></a><span data-ttu-id="9b3f1-204">Typkonverter im XAML-Knotenstream</span><span class="sxs-lookup"><span data-stu-id="9b3f1-204">Type Converters in the XAML Node Stream</span></span>

<span data-ttu-id="9b3f1-205">Beim Verwenden eines XAML-Knotenstreams wurde weder die Aktion noch das Endergebnis eines Typkonverters bis dato ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-205">If you are working with a XAML node stream, the action or end result of a type converter is not yet executed.</span></span> <span data-ttu-id="9b3f1-206">In einem Ladepfad muss die Attributzeichenfolge schließlich typkonvertiert werden, um Reste als ein Textwert im Start- und End-Member zu laden.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-206">In a load path, the attribute string that eventually needs to be type-converted in order to load remains as a text value within a start member and end member.</span></span> <span data-ttu-id="9b3f1-207">Der schließlich für diesen Vorgang benötigte Typkonverter kann anhand der Eigenschaft <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> ermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-207">The type converter that is eventually needed for this operation can be determined by using the <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="9b3f1-208">Das Abrufen eines gültigen Werts von <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> verlangt jedoch, über einen XAML-Schemakontext zu verfügen, worüber auf diese Informationen über das zugrunde liegende Member oder den Typ des Objektwerts, den das Member verwendet, zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-208">However, obtaining a valid value from <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> relies on having a XAML schema context, which can access such information through the underlying member, or the type of the object value that the member uses.</span></span> <span data-ttu-id="9b3f1-209">Für das Aufrufen des Typkonvertierungsverhaltens ist zudem der XAML-Schemakontext erforderlich, da dafür die Typzuordnung und das Erstellen einer Konverterinstanz erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="9b3f1-209">Invoking the type conversion behavior also requires the XAML schema context because that requires type-mapping and creating a converter instance.</span></span>

## <a name="see-also"></a><span data-ttu-id="9b3f1-210">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="9b3f1-210">See also</span></span>

- <xref:System.ComponentModel.TypeConverterAttribute>
- [<span data-ttu-id="9b3f1-211">Typkonverter und Markuperweiterungen für XAML</span><span class="sxs-lookup"><span data-stu-id="9b3f1-211">Type Converters and Markup Extensions for XAML</span></span>](type-converters-and-markup-extensions.md)
- [<span data-ttu-id="9b3f1-212">Übersicht über XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="9b3f1-212">XAML Overview (WPF)</span></span>](../net/wpf/fundamentals/xaml.md)
