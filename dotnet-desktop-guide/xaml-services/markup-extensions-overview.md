---
title: Übersicht über Markuperweiterungen für XAML
ms.date: 03/30/2017
helpviewer_keywords:
- markup extensions [XAML Services], custom
- XAML [XAML Services], markup extensions
ms.assetid: 261b2b11-2dc0-462f-8c66-55b8c9c6e436
ms.openlocfilehash: 69f9d899b9a33d3de2fd7762990925138a47767c
ms.sourcegitcommit: 9f6df084c53a3da0ea657ed0d708a72213683084
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/09/2020
ms.locfileid: "96976968"
---
# <a name="overview-of-markup-extensions-for-xaml"></a><span data-ttu-id="bd2e5-102">Übersicht über Markup Erweiterungen für XAML</span><span class="sxs-lookup"><span data-stu-id="bd2e5-102">Overview of markup extensions for XAML</span></span>

<span data-ttu-id="bd2e5-103">Bei Markup Erweiterungen handelt es sich um eine XAML-Technik zum Abrufen eines Werts, der kein primitiver oder spezifischer XAML-Typ ist.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-103">Markup extensions are a XAML technique for obtaining a value that's not a primitive or a specific XAML type.</span></span> <span data-ttu-id="bd2e5-104">Für die Attributverwendung verwenden Markuperweiterungen die bekannte Zeichensequenz einer öffnenden geschweiften Klammer `{` für den Anfang des Markuperweiterungsbereichs und eine schließende geschweifte Klammer `}` zum Beenden.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-104">For attribute usage, markup extensions use the known character sequence of an opening curly brace `{` to enter the markup extension scope, and a closing curly brace `}` to exit.</span></span> <span data-ttu-id="bd2e5-105">Wenn Sie .net XAML-Dienste verwenden, können Sie einige der vordefinierten XAML-sprach Markup Erweiterungen aus der Assembly "System. XAML" verwenden.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-105">When using .NET XAML Services, you can use some of the predefined XAML language markup extensions from the System.Xaml assembly.</span></span> <span data-ttu-id="bd2e5-106">Sie können zudem in „System.Xaml“ definierte Subklassen aus der Klasse <xref:System.Windows.Markup.MarkupExtension> verwenden und Ihre eigenen Markuperweiterungen definieren.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-106">You can also subclass from the <xref:System.Windows.Markup.MarkupExtension> class, defined in System.Xaml, and define your own markup extensions.</span></span> <span data-ttu-id="bd2e5-107">Oder Sie können Markup Erweiterungen verwenden, die von einem bestimmten Framework definiert werden, wenn Sie bereits auf dieses Framework verweisen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-107">Or you can use markup extensions defined by a particular framework if you are already referencing that framework.</span></span>

<span data-ttu-id="bd2e5-108">Wenn auf eine Markuperweiterungsverwendung zugegriffen wird, kann der XAML-Objekt-Writer Dienste für eine benutzerdefinierte <xref:System.Windows.Markup.MarkupExtension> -Klasse über einen Dienstverbindungspunkt in der <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A?displayProperty=nameWithType> -Überschreibung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-108">When a markup extension usage is accessed, the XAML object writer can provide services to a custom <xref:System.Windows.Markup.MarkupExtension> class through a service connection point in the <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A?displayProperty=nameWithType> override.</span></span> <span data-ttu-id="bd2e5-109">Die Dienste können zum Abrufen des Kontexts über die Verwendung, spezifische Funktionalitäten des Objekt-Writers, den XAML-Schemakontext usw. verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-109">The services can be used to obtain context about the usage, specific capabilities of the object writer, XAML schema context, and so on.</span></span>

## <a name="xaml-defined-markup-extensions"></a><span data-ttu-id="bd2e5-110">XAML-definierte Markup Erweiterungen</span><span class="sxs-lookup"><span data-stu-id="bd2e5-110">XAML-defined markup extensions</span></span>

<span data-ttu-id="bd2e5-111">Mehrere Markup Erweiterungen werden von .net XAML-Diensten für die XAML-Sprachunterstützung implementiert.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-111">Several markup extensions are implemented by .NET XAML Services for XAML language support.</span></span> <span data-ttu-id="bd2e5-112">Diese Markuperweiterungen entsprechen Teilen der Spezifikation von XAML als Sprache.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-112">These markup extensions correspond to parts of the specification of XAML as a language.</span></span> <span data-ttu-id="bd2e5-113">Diese lassen sich für gewöhnlich durch das `x:` -Präfix in der Syntax bestimmen, wie dies unter der häufigen Verwendung zu sehen ist.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-113">These are typically identifiable by the `x:` prefix in the syntax as seen in common usage.</span></span> <span data-ttu-id="bd2e5-114">.Net XAML-Dienst Implementierungen für diese XAML-Sprachelemente werden alle von der-  <xref:System.Windows.Markup.MarkupExtension> Basisklasse abgeleitet.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-114">.NET XAML Services implementations for these XAML language elements all derive from the  <xref:System.Windows.Markup.MarkupExtension> base class.</span></span>

> [!NOTE]
> <span data-ttu-id="bd2e5-115">Das Präfix `x:` wird für die typische XAML-Namespacezuordnung des XAML-Sprachnamespace im Stammelement einer XAML-Produktion verwendet.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-115">The `x:` prefix is used for the typical XAML namespace mapping of the XAML language namespace, in the root element of a XAML production.</span></span> <span data-ttu-id="bd2e5-116">Beispielsweise initiieren die Visual Studio-Projekt-und-Seitenvorlagen für verschiedene spezifische Frameworks eine XAML-Datei, die diese `x:` Zuordnung verwendet.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-116">For example, the Visual Studio project and page templates for various specific frameworks initiate a XAML file using this `x:` mapping.</span></span> <span data-ttu-id="bd2e5-117">Sie können ein anderes Präfixtoken in Ihrer XAML-Namespacezuordnung auswählen. In dieser Dokumentation wird jedoch von der standardmäßigen `x:` -Zuordnung im Zuge der Ermittlung dieser Entitäten ausgegangen, die im Gegensatz zum standardmäßigen XAML-Namespace eines bestimmten Frameworks oder anderer willkürlicher CLR- oder XML-Namespaces ein definierter Bestandteil des XAML-Sprachennamespace sind.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-117">You could choose a different prefix token in your own XAML namespace mapping, but this documentation will assume the default `x:` mapping as a means of identifying those entities that are a defined part of the XAML language XAML namespace, as opposed to a specific framework's default XAML namespace or other arbitrary CLR or XML namespaces.</span></span>

### <a name="xtype"></a><span data-ttu-id="bd2e5-118">x:Type</span><span class="sxs-lookup"><span data-stu-id="bd2e5-118">x:Type</span></span>

<span data-ttu-id="bd2e5-119">`x:Type` stellt das <xref:System.Type> -Objekt für den benannten Typ bereit.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-119">`x:Type` supplies the <xref:System.Type> object for the named type.</span></span> <span data-ttu-id="bd2e5-120">Diese Funktionalität wird am häufigsten in Mechanismen mit Verzögerungen verwendet, die einen zugrunde liegenden CLR-Typ und eine Typenableitung als Gruppierungsmoniker oder Bezeichner verwenden.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-120">This functionality is used most frequently in deferral mechanisms that use underlying CLR type and type derivation as a grouping moniker or identifier.</span></span> <span data-ttu-id="bd2e5-121">WPF-Style und -Vorlagen und deren Verwendung von `TargetType` -Eigenschaften sind ein bestimmtes Beispiel.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-121">WPF styles and templates, and their usage of `TargetType` properties, are a specific example.</span></span> <span data-ttu-id="bd2e5-122">Weitere Informationen finden Sie unter [x:Type Markup Extension](xtype-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="bd2e5-122">For more information, see [x:Type Markup Extension](xtype-markup-extension.md).</span></span>

### <a name="xstatic"></a><span data-ttu-id="bd2e5-123">x:Static</span><span class="sxs-lookup"><span data-stu-id="bd2e5-123">x:Static</span></span>

<span data-ttu-id="bd2e5-124">`x:Static` generiert statische Werte aus Werttypecode-Entitäten, die nicht direkt der Typ des Werts einer Eigenschaft sind, jedoch zu diesem Typ ausgewertet werden können.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-124">`x:Static` produces static values from value-type code entities that are not directly the type of a property's value, but can be evaluated to that type.</span></span> <span data-ttu-id="bd2e5-125">Dies ist hilfreich für das Angeben von Werten, die bereits als bekannte Konstanten in einer Typendefinition vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-125">This is useful for specifying values that already exist as well-known constants in a type definition.</span></span> <span data-ttu-id="bd2e5-126">Weitere Informationen finden Sie unter [x:Static Markup Extension](xstatic-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="bd2e5-126">For more information, see [x:Static Markup Extension](xstatic-markup-extension.md).</span></span>

### <a name="xnull"></a><span data-ttu-id="bd2e5-127">x:Null</span><span class="sxs-lookup"><span data-stu-id="bd2e5-127">x:Null</span></span>

<span data-ttu-id="bd2e5-128">`x:Null` gibt `null` als einen Wert für ein XAML-Member an.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-128">`x:Null` specifies `null` as a value for a XAML member.</span></span> <span data-ttu-id="bd2e5-129">In Abhängigkeit des Designs von bestimmten Typen oder größerer Frameworkkonzepte ist `null` nicht immer ein Standardwert für eine Eigenschaft oder der implizierte Wert eines leeren Zeichenfolgenattributs.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-129">Depending on the design of specific types or on larger framework concepts, `null` is not always a default value for a property, or the implied value of an empty string attribute.</span></span> <span data-ttu-id="bd2e5-130">Weitere Informationen finden Sie unter [x:Null Markup Extension](xnull-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="bd2e5-130">For more information, see [x:Null Markup Extension](xnull-markup-extension.md).</span></span>

### <a name="xarray"></a><span data-ttu-id="bd2e5-131">x:Array</span><span class="sxs-lookup"><span data-stu-id="bd2e5-131">x:Array</span></span>

<span data-ttu-id="bd2e5-132">`x:Array` unterstützt das Erstellen von allgemeinen Arrays in einer XAML-Syntax in Fällen, wo die durch Basiselemente und Steuerelementmodelle bereitgestellte Auflistungsunterstützung nicht absichtlich verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-132">`x:Array` supports creation of general arrays in XAML syntax in cases where the collection support that is provided by base elements and control models is deliberately not used.</span></span> <span data-ttu-id="bd2e5-133">Weitere Informationen finden Sie unter [x:Array Markup Extension](xarray-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="bd2e5-133">For more information, see [x:Array Markup Extension](xarray-markup-extension.md).</span></span> <span data-ttu-id="bd2e5-134">Insbesondere in XAML 2009 erfolgt der Zugriff auf Arrays als Sprachprimitive und nicht im Sinne einer Erweiterung.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-134">In XAML 2009 specifically, arrays are accessed as language primitives instead of as an extension.</span></span> <span data-ttu-id="bd2e5-135">Weitere Informationen finden Sie unter [XAML 2009 Language Features](xaml-2009-language-features.md).</span><span class="sxs-lookup"><span data-stu-id="bd2e5-135">For more information, see [XAML 2009 Language Features](xaml-2009-language-features.md).</span></span>

### <a name="xreference"></a><span data-ttu-id="bd2e5-136">x:Reference</span><span class="sxs-lookup"><span data-stu-id="bd2e5-136">x:Reference</span></span>

<span data-ttu-id="bd2e5-137">`x:Reference` ist ein Bestandteil von XAML 2009. Hierbei handelt es sich um eine Erweiterung des ursprünglichen (2006) Sprachsatzes.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-137">`x:Reference` is part of XAML 2009, an extension of the original (2006) language set.</span></span> <span data-ttu-id="bd2e5-138">`x:Reference` repräsentiert einen Verweis auf ein anderes vorhandenes Objekt in einem Objektdiagramm.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-138">`x:Reference` represents a reference to another existing object in an object graph.</span></span> <span data-ttu-id="bd2e5-139">Dieses Objekt wird anhand seiner `x:Name`bestimmt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-139">That object is identified by its `x:Name`.</span></span> <span data-ttu-id="bd2e5-140">Weitere Informationen finden Sie unter [x:Reference Markup Extension](xreference-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="bd2e5-140">For more information, see [x:Reference Markup Extension](xreference-markup-extension.md).</span></span>

### <a name="other-x-constructs"></a><span data-ttu-id="bd2e5-141">Andere x:-Konstrukte</span><span class="sxs-lookup"><span data-stu-id="bd2e5-141">Other x: Constructs</span></span>

<span data-ttu-id="bd2e5-142">Es sind weitere `x:` -Konstrukte für die Unterstützung von XAML-Sprachfeatures vorhanden. Diese sind jedoch nicht als Markuperweiterungen implementiert.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-142">Other `x:` constructs to support XAML language features exist, but these are not implemented as markup extensions.</span></span> <span data-ttu-id="bd2e5-143">Weitere Informationen finden Sie unter [XAML Namespace (x:) Language Features (Sprachfunktionen des XAML-Namespace (x:))](namespace-language-features.md).</span><span class="sxs-lookup"><span data-stu-id="bd2e5-143">For more information, see [XAML Namespace (x:) Language Features](namespace-language-features.md).</span></span>

## <a name="the-markupextension-base-class"></a><span data-ttu-id="bd2e5-144">Die MarkupExtension-Basisklasse</span><span class="sxs-lookup"><span data-stu-id="bd2e5-144">The MarkupExtension Base Class</span></span>

<span data-ttu-id="bd2e5-145">Zum Definieren einer benutzerdefinierten Markuperweiterung, die mit standardmäßigen Implementierungen von XAML-Readern und XAML-Writern in „System.Xaml“ interagieren kann, müssen Sie eine Klasse aus der abstrakten Klasse <xref:System.Windows.Markup.MarkupExtension> ableiten.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-145">To define a custom markup extension that can interact with the default implementations of XAML readers and XAML writers in System.Xaml, you derive a class from the abstract <xref:System.Windows.Markup.MarkupExtension> class.</span></span> <span data-ttu-id="bd2e5-146">Diese Klasse verfügt über eine zu überschreibende Methode, nämlich <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-146">That class has one method to override, which is <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>.</span></span> <span data-ttu-id="bd2e5-147">Sie müssen möglicherweise zudem zusätzliche Konstruktoren definieren, um Argumente für die Markuperweiterungsverwendung und für den Abgleich von festlegbaren Eigenschaften zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-147">You might also need to define additional constructors to support arguments to the markup extension usage, and matching settable properties.</span></span>

<span data-ttu-id="bd2e5-148">Mithilfe <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> von verfügt eine benutzerdefinierte Markup Erweiterung über Zugriff auf einen Dienst Kontext, der die Umgebung meldet, in der die Markup Erweiterung von einem XAML-Prozessor aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-148">Through <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>, a custom markup extension has access to a service context that reports the environment where the markup extension is invoked by a XAML processor.</span></span> <span data-ttu-id="bd2e5-149">Im Ladepfad ist dies in der Regel ein <xref:System.Xaml.XamlObjectWriter> .</span><span class="sxs-lookup"><span data-stu-id="bd2e5-149">In the load path, this is typically a <xref:System.Xaml.XamlObjectWriter>.</span></span> <span data-ttu-id="bd2e5-150">Im Speicherpfad ist dies für gewöhnlich ein <xref:System.Xaml.XamlXmlWriter>.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-150">In the save path this is typically a <xref:System.Xaml.XamlXmlWriter>.</span></span> <span data-ttu-id="bd2e5-151">Jeder Bericht der Dienstkontext als eine interne XAML-Dienstanbieter-Kontextklasse, die ein Dienstanbietermuster implementiert.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-151">Each report the service context as an internal XAML service provider context class that implements a service provider pattern.</span></span> <span data-ttu-id="bd2e5-152">Weitere Informationen über die verfügbaren Dienste und was sie darstellen finden Sie unter [Type Converters and Markup Extensions for XAML](type-converters-and-markup-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="bd2e5-152">For more information about the available services and what they represent, see [Type Converters and Markup Extensions for XAML](type-converters-and-markup-extensions.md).</span></span>

<span data-ttu-id="bd2e5-153">Ihre Markuperweiterungsklasse muss eine öffentliche Zugriffsebene verwenden. XAML-Prozessoren müssen immer in der Lage sein, die Unterstützungsklasse der Markuperweiterung zu instanziieren, um die zugehörigen Dienste zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-153">Your markup extension class must use a public access level; XAML processors must always be able to instantiate the markup extension's support class in order to use its services.</span></span>

## <a name="defining-the-support-type-for-a-custom-markup-extension"></a><span data-ttu-id="bd2e5-154">Definieren des Unterstützungstyps für eine benutzerdefinierte Markuperweiterung</span><span class="sxs-lookup"><span data-stu-id="bd2e5-154">Defining the Support Type for a Custom Markup Extension</span></span>

<span data-ttu-id="bd2e5-155">Wenn Sie .net XAML-Dienste oder Frameworks verwenden, die auf .net XAML-Diensten aufbauen, haben Sie zwei Möglichkeiten, den Typ der Markup Erweiterungs Unterstützung zu benennen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-155">When you use .NET XAML Services or frameworks that build on .NET XAML Services, you have two choices for how to name the markup extension support type.</span></span> <span data-ttu-id="bd2e5-156">Der Typname ist relevant für die Art und Weise des Zugriffsversuchs und Aufrufs von XAML-Objekt-Writern auf einen Markup-Erweiterungsunterstützungstyp, wenn sie eine Markuperweiterungsverwendung in XAML feststellen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-156">The type name is relevant to how XAML object writers attempt to access and invoke a markup extension support type when they encounter a markup extension usage in XAML.</span></span> <span data-ttu-id="bd2e5-157">Verwenden Sie eine der folgenden Strategien für die Benennung:</span><span class="sxs-lookup"><span data-stu-id="bd2e5-157">Use one of the following naming strategies:</span></span>

- <span data-ttu-id="bd2e5-158">Der Typname muss genau mit dem Namen des XAML-Markupverwendungstokens übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-158">Name the type name to be an exact match to the XAML markup usage token.</span></span> <span data-ttu-id="bd2e5-159">Benennen Sie beispielsweise für die Unterstützung einer `{Collate ...}` -Erweiterungsverwendung den Unterstützungstyp `Collate`.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-159">For example, to support a `{Collate ...}` extension usage, name the support type `Collate`.</span></span>
- <span data-ttu-id="bd2e5-160">Benennen Sie den Typnamen, sodass er das  Verwendungszeichenfolgentoken plus das Suffix `Extension`lautet.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-160">Name the type name to be the usage string token plus the suffix `Extension`.</span></span> <span data-ttu-id="bd2e5-161">Benennen Sie beispielsweise für die Unterstützung einer `{Collate ...}` -Erweiterungsverwendung den Unterstützungstyp `CollateExtension`.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-161">For example, to support a `{Collate ...}` extension usage, name the support type `CollateExtension`.</span></span>

<span data-ttu-id="bd2e5-162">Entsprechend der Suchreihenfolge wird zunächst nach dem Klassennamen mit dem Suffix `Extension`und dann nach dem Klassennamen ohne dem Suffix `Extension` gesucht.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-162">The order of lookup is to look for the `Extension`-suffixed class name first and then look for the class name without the `Extension` suffix.</span></span>

<span data-ttu-id="bd2e5-163">Aus Sicht der Markupverwendung ist das Einschließen des Suffixes `Extension` als Bestandteil der Verwendung gültig.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-163">From the markup usage perspective, including the `Extension` suffix as part of the usage is valid.</span></span> <span data-ttu-id="bd2e5-164">Dies verhält sich jedoch so, als wäre `Extension` ein wirklicher Bestandteil des Klassennamens. So könnten XAML-Objekt-Writer eine Markuperweiterungs-Unterstützungsklasse für diese Verwendung nicht erfolgreich auflösen, wenn die Unterstützungsklasse nicht über das Suffix `Extension` verfügen würde.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-164">However, this behaves as if `Extension` is truly part of the class name, and XAML object writers would fail to resolve a markup extension support class for that usage if the support class did not have the `Extension` suffix.</span></span>

### <a name="the-parameterless-constructor"></a><span data-ttu-id="bd2e5-165">Der Parameter lose Konstruktor</span><span class="sxs-lookup"><span data-stu-id="bd2e5-165">The parameterless constructor</span></span>

<span data-ttu-id="bd2e5-166">Für alle Markup-Erweiterungs Unterstützungs Typen sollten Sie einen öffentlichen Parameter losen Konstruktor verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-166">For all markup extension support types, you should expose a public parameterless constructor.</span></span> <span data-ttu-id="bd2e5-167">Ein Parameter loser Konstruktor ist erforderlich, wenn ein XAML-objektwriter die Markup Erweiterung aus einer Objekt Element Verwendung instanziiert.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-167">A parameterless constructor is required for any case where a XAML object writer instantiates the markup extension from an object element usage.</span></span> <span data-ttu-id="bd2e5-168">Das Unterstützen der Objektelementverwendung ist eine angemessene Erwartung für eine Markuperweiterung, insbesondere für die Serialisierung.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-168">Supporting object element usage is a fair expectation for a markup extension, particularly for serialization.</span></span> <span data-ttu-id="bd2e5-169">Sie können jedoch eine Markuperweiterung ohne einen öffentlichen Konstruktor implementieren, wenn Sie nur die Attributverwendungen der Markuperweiterung unterstützen möchten.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-169">However, you can implement a markup extension without a public constructor if you only intend to support attribute usages of the markup extension.</span></span>

<span data-ttu-id="bd2e5-170">Wenn die Verwendung der Markup Erweiterung keine Argumente aufweist, ist der Parameter lose Konstruktor erforderlich, um die Verwendung zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-170">If your markup extension usage has no arguments, the parameterless constructor is required to support usage.</span></span>

## <a name="constructor-patterns-and-positional-arguments-for-a-custom-markup-extension"></a><span data-ttu-id="bd2e5-171">Konstruktormuster und Positionsargumente für eine benutzerdefinierte Markuperweiterung</span><span class="sxs-lookup"><span data-stu-id="bd2e5-171">Constructor Patterns and Positional Arguments for a Custom Markup Extension</span></span>

<span data-ttu-id="bd2e5-172">Für eine Markuperweiterung mit vorgesehener Argumentverwendung müssen die öffentlichen Konstruktoren den Modi der vorgesehenen Verwendung entsprechen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-172">For a markup extension with intended argument usage, the public constructors must correspond to the modes of the intended usage.</span></span> <span data-ttu-id="bd2e5-173">Wen für Ihre Markuperweiterung ein Positionsargument als eine gültige Verwendung erforderlich ist, sollten Sie demnach einen öffentlichen Konstruktor mit einem Eingabeparameter unterstützen, der das Positionsargument akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-173">In other words, if your markup extension is designed to require one positional argument as a valid usage, you should support a public constructor with one input parameter that takes the positional argument.</span></span>

<span data-ttu-id="bd2e5-174">Angenommen, die `Collate` -Markuperweiterung soll nur einen Modus unterstützen, in dem ein Positionsargument vorhanden ist, der den zugehörigen Modus darstellt, und zwar als eine `CollationMode` -Enumerationskonstante angegeben.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-174">For example, suppose the `Collate` markup extension is intended to support only a mode where there is one positional argument that represents its mode, specified as a `CollationMode` enumeration constant.</span></span> <span data-ttu-id="bd2e5-175">In diesem Fall sollte ein Konstruktor mit der folgenden Form vorliegen:</span><span class="sxs-lookup"><span data-stu-id="bd2e5-175">In this case, there should be a constructor with the following form:</span></span>

```csharp
public Collate(CollationMode collationMode) {...}
```

<span data-ttu-id="bd2e5-176">Auf einer grundlegenden Ebene handelt es sich bei den an eine Markuperweiterung weitergegebenen Argumenten um eine Zeichenfolge, da sie von den Attributwerten des Markups weitergeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-176">At a basic level, the arguments passed to a markup extension are a string because they are being forwarded from the markup's attribute values.</span></span> <span data-ttu-id="bd2e5-177">Sie können alle Ihre Argumente in Zeichenfolgen umwandeln und mit Eingaben auf dieser Ebene arbeiten.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-177">You can make all of your arguments strings and work with input at that level.</span></span> <span data-ttu-id="bd2e5-178">Sie haben jedoch Zugriff auf bestimmte Verarbeitungen, die auftreten, bevor die Markuperweiterungsargumente an die Unterstützungsklassen weitergegeben werden.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-178">However, you do have access to certain processing that occurs before the markup extension arguments are passed to the support class.</span></span>

<span data-ttu-id="bd2e5-179">Die Verarbeitung erfolgt konzeptionell, als ob die Markuperweiterung ein zu erstellendes Objekt wäre, anschließend werden die zugehörigen Memberwerte festgelegt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-179">The processing works conceptually as if the markup extension is an object to be created, and then its member values are set.</span></span> <span data-ttu-id="bd2e5-180">Jede festzulegende angegebene Eigenschaft wird in ähnlicher Weise ausgewertet, wie ein angegebenes Member in einem erstellten Objekt festgelegt werden kann, wenn XAML analysiert wird.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-180">Each specified property to set is evaluated similar to how a specified member can be set on a created object when XAML is parsed.</span></span> <span data-ttu-id="bd2e5-181">Es gibt zwei wichtige Unterschiede:</span><span class="sxs-lookup"><span data-stu-id="bd2e5-181">There are two important differences:</span></span>

- <span data-ttu-id="bd2e5-182">Wie bereits erwähnt, muss ein Markup-Erweiterungs Unterstützungs Typ keinen Parameter losen Konstruktor aufweisen, um in XAML instanziiert zu werden.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-182">As noted previously, a markup extension support type does not need to have a parameterless constructor in order to be instantiated in XAML.</span></span> <span data-ttu-id="bd2e5-183">Seine Objektkonstruktion wird verzögert, bis seine möglichen Argumente in der Textsyntax als Positions- oder Namensargumente in Token übersetzt und ausgewertet werden und der entsprechende Konstruktor zu diesem Zeitpunkt aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-183">Its object construction is deferred until its possible arguments in the text syntax are tokenized and evaluated as either positional or named arguments, and the appropriate constructor is called at that time.</span></span>
- <span data-ttu-id="bd2e5-184">Markuperweiterungsverwendungen können verschachtelt werden.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-184">Markup extensions usages can be nested.</span></span> <span data-ttu-id="bd2e5-185">Die innerste Markuperweiterung wird zuerst ausgewertet.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-185">The innermost markup extension is evaluated first.</span></span> <span data-ttu-id="bd2e5-186">Daher können Sie eine solche Verwendung annehmen und einen der Konstruktionsparameter als einen Typ deklarieren, für den ein zu generierender Wertkonverter (beispielsweise eine Markuperweiterung) erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-186">Therefore, you can assume such a usage and declare one of the construction parameters to be a type that requires a value converter (such as a markup extension) to produce.</span></span>

<span data-ttu-id="bd2e5-187">Der Einsatz dieser Verarbeitung wurde im vorherigen Beispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-187">A reliance on such processing was shown in the previous example.</span></span> <span data-ttu-id="bd2e5-188">Der XAML-Objekt-Writer für .net XAML-Dienste verarbeitet enumerationskonstantennamen in Aufzählungswerte auf einer systemeigenen Ebene.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-188">.NET XAML Services XAML object writer processes enumeration constant names into enumerated values at a native level.</span></span>

<span data-ttu-id="bd2e5-189">Die Verarbeitung einer Textsyntax eines Markup-Erweiterungspositionsparameters kann auch auf einem Typkonverter beruhen, der mit dem Typ verknüpft ist, der sich im Konstruktionsargument befindet.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-189">Processing text syntax of a markup extension positional parameter can also rely on a type converter that is associated with the type that is in the construction argument.</span></span>

<span data-ttu-id="bd2e5-190">Die Argumente werden als Positionsargumente bezeichnet, da die Reihenfolge, in welcher die Token in der Verwendung ermittelt werden, der Positionsreihenfolge des Konstruktorparameters entspricht, zu dem sie zugewiesen werden.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-190">The arguments are called positional arguments because the order in which the tokens in the usage is encountered corresponds to the positional order of the constructor parameter to which they are assigned.</span></span> <span data-ttu-id="bd2e5-191">Ziehen Sie beispielsweise die folgende Konstruktorsignatur in Betracht:</span><span class="sxs-lookup"><span data-stu-id="bd2e5-191">For example, consider the following constructor signature:</span></span>

```csharp
public Collate(CollationMode collationMode, object collateThis) {...}
```

<span data-ttu-id="bd2e5-192">Ein XAML-Prozessor erwartet zwei Positionsargumente für diese Markuperweiterung.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-192">A XAML processor expects two positional arguments for this markup extension.</span></span> <span data-ttu-id="bd2e5-193">Bei Vorhandensein eines Verwendungs- `{Collate AlphaUp,{x:Reference circularFile}}`wird das `AlphaUp` -Token an den ersten Parameter gesendet und als eine als Konstante bezeichnete `CollationMode` -Enumeration ausgewertet.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-193">If there was a usage `{Collate AlphaUp,{x:Reference circularFile}}`, the `AlphaUp` token is sent to the first parameter and evaluated as a `CollationMode` enumeration named constant.</span></span> <span data-ttu-id="bd2e5-194">Das Ergebnis der inneren `x:Reference` wird an den zweiten Parameter gesendet und wird als ein Objekt ausgewertet.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-194">The result of the inner `x:Reference` is sent to the second parameter and evaluated as an object.</span></span>

<span data-ttu-id="bd2e5-195">In der XAML dient das Komma für angegebene Regeln für die Markuperweiterungssyntax und -verarbeitung als Trennzeichen zwischen Argumenten, und zwar unabhängig davon, ob es sich um Positions- oder Namensargumente handelt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-195">In the XAML specified rules for markup extension syntax and processing, the comma is the delimiter between arguments, whether those arguments are positional arguments or named arguments.</span></span>

### <a name="duplicate-arity-of-positional-arguments"></a><span data-ttu-id="bd2e5-196">Doppelte Stelligkeit von positionellen Argumenten</span><span class="sxs-lookup"><span data-stu-id="bd2e5-196">Duplicate arity of positional arguments</span></span>

<span data-ttu-id="bd2e5-197">Wenn ein XAML-Objekt-Writer eine Markuperweiterungsverwendung mit Positionsargumenten ermittelt und mehrere Konstruktorargumente vorliegen, die die Anzahl der Argumente (eine doppelte Stelligkeit) verwenden, handelt es sich nicht zwangsläufig um einen Fehler.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-197">If a XAML object writer encounters a markup extension usage with positional arguments, and there are multiple constructor arguments that take that number of arguments (a duplicate arity), that is not necessarily an error.</span></span> <span data-ttu-id="bd2e5-198">Das Verhalten ist von der anpassbaren XAML-Schemakontexteinstellung <xref:System.Xaml.XamlSchemaContextSettings.SupportMarkupExtensionsWithDuplicateArity%2A>abhängig.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-198">The behavior depends on a customizable XAML schema context setting, <xref:System.Xaml.XamlSchemaContextSettings.SupportMarkupExtensionsWithDuplicateArity%2A>.</span></span> <span data-ttu-id="bd2e5-199">Wenn <xref:System.Xaml.XamlSchemaContextSettings.SupportMarkupExtensionsWithDuplicateArity%2A>`true`ist, sollte ein XAML-Objekt-Writer keine Ausnahme auslösen, wenn es sich nur um eine doppelte Stelligkeit handelt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-199">If <xref:System.Xaml.XamlSchemaContextSettings.SupportMarkupExtensionsWithDuplicateArity%2A> is `true`, a XAML object writer should not throw an exception only for reasons of duplicate arity.</span></span> <span data-ttu-id="bd2e5-200">Das Verhalten über diesen Punkt hinaus ist nicht streng definiert.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-200">Behavior beyond that point is not strictly defined.</span></span> <span data-ttu-id="bd2e5-201">Im grundlegenden Entwurfsansatz wird davon ausgegangen, dass der Schemakontext für die bestimmten Parameter verfügbaren Typinformationen aufweist und explizite Umwandlungen versuchen kann, die die doppelten Kandidaten abgleichen, um zu sehen, bei welcher Signatur es sich um die beste Übereinstimmung handelt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-201">The basic design assumption is that the schema context has type information available for the specific parameters and can attempt explicit casts that match the duplicate candidates to see which signature might be the best match.</span></span> <span data-ttu-id="bd2e5-202">Eine Ausnahme wird möglicherweise weiterhin ausgelöst, wenn keine der Signaturen die Tests besteht, die durch diesen bestimmten Schemakontext veranlasst werden, der auf einem XAML-Objekt-Writer ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-202">An exception might still be thrown if no signatures can pass the tests that are imposed by that particular schema context that is running on a XAML object writer.</span></span>

<span data-ttu-id="bd2e5-203">Standardmäßig <xref:System.Xaml.XamlSchemaContextSettings.SupportMarkupExtensionsWithDuplicateArity%2A> ist `false` in den CLR-basierten <xref:System.Xaml.XamlSchemaContext> für .net-XAML-Dienste.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-203">By default, <xref:System.Xaml.XamlSchemaContextSettings.SupportMarkupExtensionsWithDuplicateArity%2A> is `false` in the CLR-based <xref:System.Xaml.XamlSchemaContext> for .NET XAML Services.</span></span> <span data-ttu-id="bd2e5-204">Daher löst der standardmäßige <xref:System.Xaml.XamlObjectWriter> Ausnahmen aus, wenn er eine Markuperweiterungsverwendung erkennt, bei der eine doppelte Stelligkeit in den Konstruktoren des Unterstützungstyps vorliegt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-204">Thus, the default <xref:System.Xaml.XamlObjectWriter> throws exceptions if it encounters a markup extension usage where there is duplicate arity in the backing type's constructors.</span></span>

## <a name="named-arguments-for-a-custom-markup-extension"></a><span data-ttu-id="bd2e5-205">Benannte Argumente für eine benutzerdefinierte Markup Erweiterung</span><span class="sxs-lookup"><span data-stu-id="bd2e5-205">Named arguments for a custom markup extension</span></span>

<span data-ttu-id="bd2e5-206">Gemäß XAML spezifizierte Markuperweiterungen können zudem ein Formular für benannte Argumente für die Verwendung verwenden.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-206">Markup extensions as specified by XAML can also use a named arguments form for usage.</span></span> <span data-ttu-id="bd2e5-207">Auf der ersten Ebene der Tokenisierung wird die Textsyntax in Argumente unterteilt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-207">At the first level of tokenization, the text syntax is divided into arguments.</span></span> <span data-ttu-id="bd2e5-208">Das Vorhandensein eines Gleichheitszeichens (=) in einem Argument bestimmt ein Argument als ein benanntes Argument.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-208">The presence of an equals sign (=) within any argument identifies an argument as a named argument.</span></span> <span data-ttu-id="bd2e5-209">Ein derartiges Argument wird ebenfalls in ein Name/Wert-Paar in Token übersetzt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-209">Such an argument is also tokenized into a name/value pair.</span></span> <span data-ttu-id="bd2e5-210">In diesem Fall wird eine öffentlich festlegbare Eigenschaft des Unterstützungstyps der Markuperweiterung benannt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-210">The name in this case names a public settable property of the markup extension's support type.</span></span> <span data-ttu-id="bd2e5-211">Wenn Sie die benannte Argumentverwendung unterstützen möchten, sollten Sie diese öffentlich festlegbaren Eigenschaften bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-211">If you intend to support named argument usage, you should provide these public settable properties.</span></span> <span data-ttu-id="bd2e5-212">Bei den Eigenschaften kann es sich um geerbte Eigenschaften handeln, solange sie öffentlich bleiben.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-212">The properties can be inherited properties as long as they remain public.</span></span>

## <a name="accessing-service-provider-context-from-a-markup-extension-implementation"></a><span data-ttu-id="bd2e5-213">Zugriff auf den Dienstanbieterkontext über eine Markuperweiterungsimplementierung</span><span class="sxs-lookup"><span data-stu-id="bd2e5-213">Accessing Service Provider Context from a Markup Extension Implementation</span></span>

<span data-ttu-id="bd2e5-214">Die verfügbaren Dienste sind für jeden Wertkonverter gleich.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-214">The services available are the same for any value converter.</span></span> <span data-ttu-id="bd2e5-215">Der Unterschied besteht darin, wie jeder Wertkonverter den Dienstkontext empfängt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-215">The difference is in how each value converter receives the service context.</span></span> <span data-ttu-id="bd2e5-216">Der Zugriff auf Dienste und die verfügbaren Dienste wird im Thema [Type Converters and Markup Extensions for XAML](type-converters-and-markup-extensions.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-216">Accessing services and the services available are documented in the topic [Type Converters and Markup Extensions for XAML](type-converters-and-markup-extensions.md).</span></span>

## <a name="property-element-usage-of-a-markup-extension"></a><span data-ttu-id="bd2e5-217">Eigenschafts Element Verwendung einer Markup Erweiterung</span><span class="sxs-lookup"><span data-stu-id="bd2e5-217">Property element usage of a markup extension</span></span>

<span data-ttu-id="bd2e5-218">Die Szenarien für die Markuperweiterungsverwendungen werden oftmals um die Verwendung der Markuperweiterung in der Attributverwendung herum entworfen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-218">The scenarios for markup extension usages are often designed around using the markup extension in attribute usage.</span></span> <span data-ttu-id="bd2e5-219">Es ist jedoch auch potenziell möglich, die dahinterliegende Klasse zur Unterstützung von Eigenschaftselementen zu definieren.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-219">However, it is also potentially possible to define the backing class to support property element usage.</span></span>

<span data-ttu-id="bd2e5-220">Um die Eigenschafts Element Verwendung ihrer Markup Erweiterung zu unterstützen, definieren Sie einen öffentlichen Parameter losen Konstruktor.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-220">To support property element usage of your markup extension, define a public parameterless constructor.</span></span> <span data-ttu-id="bd2e5-221">Hierbei sollte es sich um einen Instanzkonstruktor und nicht um einen statischen Konstruktor handeln.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-221">This should be an instance constructor not a static constructor.</span></span> <span data-ttu-id="bd2e5-222">Dies ist erforderlich, da ein XAML-Prozessor in der Regel den Parameter losen Konstruktor für jedes Objekt Element aufrufen muss, das er von Markup verarbeitet, und dies umfasst Markup Erweiterungs Klassen als Objekt Elemente.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-222">This is required because a XAML processor must generally invoke the parameterless constructor on any object element it processes from markup, and this includes markup extension classes as object elements.</span></span> <span data-ttu-id="bd2e5-223">Für erweiterte Szenarien können Sie nicht standardmäßige Konstruktionspfade für Klassen definieren.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-223">For advanced scenarios, you can define non-default construction paths for classes.</span></span> <span data-ttu-id="bd2e5-224">(Weitere Informationen finden Sie unter [x:factorymethod-Direktive](xfactorymethod-directive.md).) Sie sollten diese Muster jedoch nicht für Markup Erweiterungs Zwecke verwenden, da dies die Ermittlung des Verwendungs Musters wesentlich schwieriger macht, sowohl für Designer als auch für Benutzer von unformatierten Markup.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-224">(For more information, see [x:FactoryMethod Directive](xfactorymethod-directive.md).) However, you should not use these patterns for markup extension purposes because this makes discovery of the usage pattern much more difficult, both for designers and for users of raw markup.</span></span>

## <a name="attributing-for-a-custom-markup-extension"></a><span data-ttu-id="bd2e5-225">Attributierung für eine benutzerdefinierte Markup Erweiterung</span><span class="sxs-lookup"><span data-stu-id="bd2e5-225">Attributing for a custom markup extension</span></span>

<span data-ttu-id="bd2e5-226">Zum Unterstützen von Entwurfsumgebungen und bestimmten XAML-Objekt-Writer-Szenarien sollten Sie einen Markup-Erweiterungsunterstützungstyp mit verschiedenen CLR-Attributen mit Attributen versehen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-226">To support both design environments and certain XAML object writer scenarios, you should attribute a markup extension support type with several CLR attributes.</span></span> <span data-ttu-id="bd2e5-227">Diese Attribute melden die vorgesehene Markuperweiterungsverwendung.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-227">These attributes report the intended markup extension usage.</span></span>

 <span data-ttu-id="bd2e5-228"><xref:System.Windows.Markup.MarkupExtensionReturnTypeAttribute> meldet die <xref:System.Type> -Informationen für den Objekttyp, den <xref:System.Windows.Markup.ArrayExtension.ProvideValue%2A> zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-228"><xref:System.Windows.Markup.MarkupExtensionReturnTypeAttribute> reports the <xref:System.Type> information for the object type that <xref:System.Windows.Markup.ArrayExtension.ProvideValue%2A> returns.</span></span> <span data-ttu-id="bd2e5-229">Anhand seiner reinen Signatur gibt <xref:System.Windows.Markup.ArrayExtension.ProvideValue%2A><xref:System.Object>zurück.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-229">By its pure signature, <xref:System.Windows.Markup.ArrayExtension.ProvideValue%2A> returns <xref:System.Object>.</span></span> <span data-ttu-id="bd2e5-230">Verschiedene Verbraucher benötigen möglicherweise genauere Rückgabetypinformationen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-230">But various consumers might want more precise return type information.</span></span> <span data-ttu-id="bd2e5-231">Dazu zählen:</span><span class="sxs-lookup"><span data-stu-id="bd2e5-231">This includes:</span></span>

- <span data-ttu-id="bd2e5-232">Designer und IDEs, die möglicherweise in der Lage sind, eine typenkompatible Unterstützung für Markuperweiterungsverwendungen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-232">Designers and IDEs, who might be able to provide type-aware support for markup extension usages.</span></span>
- <span data-ttu-id="bd2e5-233">Erweiterte Implementierungen von `SetMarkupExtension` -Handlern in Zielklassen, die sich auf die Berücksichtigung verlassen, um anstelle der Verzweigung auf spezifischen bekannten <xref:System.Windows.Markup.MarkupExtension> -Implementierungen nach Name den Rückgabetyp einer Markuperweiterung zu bestimmen</span><span class="sxs-lookup"><span data-stu-id="bd2e5-233">Advanced implementations of `SetMarkupExtension` handlers on target classes, which might rely on reflection to determine a markup extension's return type instead of branching on specific known <xref:System.Windows.Markup.MarkupExtension> implementations by name.</span></span>

## <a name="serialization-of-markup-extension-usages"></a><span data-ttu-id="bd2e5-234">Serialisierung von Markup Erweiterungs Verwendungen</span><span class="sxs-lookup"><span data-stu-id="bd2e5-234">Serialization of markup extension usages</span></span>

<span data-ttu-id="bd2e5-235">Wenn ein XAML-Objekt-Writer eine Markuperweiterungsverwendung verarbeitet und <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>aufruft, verbleibt der Kontext dafür, der zuvor eine Markuperweiterungsverwendung war, im XAML-Knotenstream, aber nicht im Objektdiagramm.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-235">When a XAML object writer processes a markup extension usage and calls <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>, the context for it previously being a markup extension usage persists in the XAML node stream but not in the object graph.</span></span> <span data-ttu-id="bd2e5-236">Im Objektdiagramm wird nur der Wert beibehalten.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-236">In the object graph, only the value is preserved.</span></span> <span data-ttu-id="bd2e5-237">Wenn andere Designszenarien oder andere Gründe für das Beibehalten der ursprünglichen Markuperweiterungsverwendung in die serialisierte Ausgabe vorliegen, müssen Sie Ihre eigene Infrastruktur für das Nachverfolgen der Markuperweiterungsverwendungen aus dem Ladepfad-XAML-Knotenstream entwerfen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-237">If you have design scenarios or other reasons for persisting the original markup extension usage into the serialized output, you must design your own infrastructure for tracking the markup extension usages from the load path XAML node stream.</span></span> <span data-ttu-id="bd2e5-238">Sie können ein Verhalten implementieren, um die Elemente des Knotenstreams aus dem Ladepfad erneut zu erstellen und sie für XAML-Writer für die Serialisierung im Speicherpfad wiedergeben, wobei der Wert an der entsprechenden Stelle des Knotenstreams ersetzt wird.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-238">You can implement behavior to recreate the elements of the node stream from the load path and play them back to XAML writers for serialization in the save path, substituting for the value in the appropriate position of the node stream.</span></span>

## <a name="markup-extensions-in-the-xaml-node-stream"></a><span data-ttu-id="bd2e5-239">Markup Erweiterungen im XAML-knotenstream</span><span class="sxs-lookup"><span data-stu-id="bd2e5-239">Markup extensions in the XAML node stream</span></span>

<span data-ttu-id="bd2e5-240">Beim Verwenden eines XAML-Knotenstreams im Ladepfad wird eine Markuperweiterungsverwendung im Knotenstream als ein Objekt angezeigt.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-240">If you are working with a XAML node stream on the load path, a markup extension usage appears in the node stream as an object.</span></span>

<span data-ttu-id="bd2e5-241">Wenn die Markuperweiterungsverwendung Positionsargumente verwendet, wird sie als ein Startobjekt mit einem Initialisierungswert repräsentiert.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-241">If the markup extension usage uses positional arguments, it is represented as a start object with an initialization value.</span></span> <span data-ttu-id="bd2e5-242">Als grobe Textdarstellung ähnelt der Knotenstream Folgendem:</span><span class="sxs-lookup"><span data-stu-id="bd2e5-242">As a rough text representation, the node stream resembles the following:</span></span>

<span data-ttu-id="bd2e5-243">`StartObject` (<xref:System.Xaml.XamlType> ist der Definitionstyp der Markuperweiterung und nicht dessen Rückgabetyp)</span><span class="sxs-lookup"><span data-stu-id="bd2e5-243">`StartObject` (<xref:System.Xaml.XamlType> is the markup extension's definition type, not its return type)</span></span>

<span data-ttu-id="bd2e5-244">`StartMember` (der Name von <xref:System.Xaml.XamlMember> lautet `_InitializationText`)</span><span class="sxs-lookup"><span data-stu-id="bd2e5-244">`StartMember` (name of the <xref:System.Xaml.XamlMember> is `_InitializationText`)</span></span>

<span data-ttu-id="bd2e5-245">`Value` (Wert entspricht den Positionsargumenten als eine Zeichenfolge, einschließlich der Trennzeichen)</span><span class="sxs-lookup"><span data-stu-id="bd2e5-245">`Value` (value is the positional arguments as a string including the intervening delimiters)</span></span>

`EndMember`

`EndObject`

<span data-ttu-id="bd2e5-246">Eine Markuperweiterungsverwendung mit benannten Argumenten wird als ein Objekt mit Membern der entsprechenden Namen repräsentiert, wobei jedes mit Textzeichenfolgenwerten festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-246">A markup extension usage with named arguments is represented as an object with members of the relevant names, each set with text string values.</span></span>

<span data-ttu-id="bd2e5-247">Tatsächlich ist für das Aufrufen der `ProvideValue` -Implementierung einer Markuperweiterung der XAML-Schemakontext erforderlich, da dafür die Typenzuordnung und das Erstellen einer Markup-Erweiterungsunterstützungs-Typinstanz erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-247">Actually invoking the `ProvideValue` implementation of a markup extension requires the XAML schema context because that requires type-mapping and creating a markup extension support type instance.</span></span> <span data-ttu-id="bd2e5-248">Dies ist ein Grund, warum Markup Erweiterungs Verwendungen auf diese Weise in den standardmäßigen .net XAML-dienstknotenstreams beibehalten werden. der Reader-Teil eines Ladepfads verfügt oftmals nicht über den nötigen XAML-Schema Kontext.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-248">This is one reason why markup extension usages are preserved this way in the default .NET XAML Services node streams -  the reader part of a load path often does not have the necessary XAML schema context available.</span></span>

<span data-ttu-id="bd2e5-249">Wenn Sie einen XAML-Knotenstream auf einem Speicherpfad verwenden, steht für gewöhnlich nichts in einer Objektdiagrammdarstellung zur Verfügung, was Sie darüber informieren könnte, dass das zu serialisierende Objekt ursprünglich durch eine Markuperweiterungsverwendung und ein `ProvideValue` -Ergebnis bereitgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-249">If you are working with a XAML node stream on the save path, there generally is nothing present in an object graph representation that can inform you that the object to serialize was originally provided by a markup extension usage and a `ProvideValue` result.</span></span> <span data-ttu-id="bd2e5-250">Szenarien, die Markuperweiterungsverwendungen für 1 beibehalten und gleichzeitig andere Änderungen im Objektdiagramm erfassen müssen, müssen ihre eigenen Techniken für das Beibehalten der Informationen einer Markuperweiterungsverwendung aus der ursprünglichen XAML-Eingabe entwickeln.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-250">Scenarios that need to persist markup extension usages for round-tripping while also capturing other changes in the object graph must devise their own techniques for preserving the knowledge of a markup extension usage from the original XAML input.</span></span> <span data-ttu-id="bd2e5-251">Beispielsweise müssen Sie zum Wiederherstellen der Markuperweiterungsverwendungen mit dem Knotenstream auf dem Speicherpfad arbeiten, um Markuperweiterungsverwendungen wiederherzustellen, oder einen Zusammenführungstyp zwischen der ursprünglichen  XAML und der Roundtrip-XAML ausführen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-251">For example, to restore the markup extension usages, you may need to work with the node stream on the save path in order to restore markup extension usages, or perform some type of merge between the original XAML and the round-tripped XAML.</span></span> <span data-ttu-id="bd2e5-252">Einige XAML-Implementierungsframeworks wie WPF verwenden Zwischentypen (Ausdrücke), um das Darstellen von Fällen zu unterstützen, in denen Markuperweiterungsverwendungen die Werte bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="bd2e5-252">Some XAML-implementing frameworks such as WPF use intermediate types (expressions) to help represent cases where markup extension usages provided the values.</span></span>

## <a name="see-also"></a><span data-ttu-id="bd2e5-253">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="bd2e5-253">See also</span></span>

- <xref:System.Windows.Markup.MarkupExtension>
- [<span data-ttu-id="bd2e5-254">Typkonverter und Markuperweiterungen für XAML</span><span class="sxs-lookup"><span data-stu-id="bd2e5-254">Type Converters and Markup Extensions for XAML</span></span>](type-converters-and-markup-extensions.md)
- [<span data-ttu-id="bd2e5-255">Markuperweiterungen und WPF-XAML</span><span class="sxs-lookup"><span data-stu-id="bd2e5-255">Markup Extensions and WPF XAML</span></span>](../framework/wpf/advanced/markup-extensions-and-wpf-xaml.md)
